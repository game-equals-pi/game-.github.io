<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Container Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* (YOUR ORIGINAL STYLES — UNCHANGED) */
body { font-family: Arial, sans-serif; margin: 0; background: #f4f4f4; }
.tabs { background:#333; display:flex; align-items:center; padding:0 20px; position:relative; }
.tab { padding:15px 30px; color:white; cursor:pointer; }
.tab.active { background:white; color:#333; font-weight:bold; }
.content { display:none; padding:30px; margin:20px; background:white; border-radius:8px; }
.content.active { display:block; }
.date-label { margin-left:auto; background:#333; color:white; padding:8px 16px; border-radius:4px; font-weight:bold; }
.tab-date { position:absolute; right:20px; top:50%; transform:translateY(-50%); }
table { width:100%; border-collapse:collapse; }
th,td { padding:10px; border-bottom:1px solid #ddd; }
th { background:#333; color:white; }
</style>
</head>

<body>

<div class="tabs">
  <div class="tab active" data-tab="bookings">Bookings</div>
  <div class="tab" data-tab="onsite">On Site</div>
  <div class="tab" data-tab="history">History</div>
  <div class="date-label" id="dateLabel"></div>
</div>

<div id="bookings" class="content active">
  <h1>Bookings <input type="date" id="bookingsDate" class="tab-date"></h1>
  <table>
    <thead><tr><th>Release</th><th>Carrier</th></tr></thead>
    <tbody id="bookingsBody"></tbody>
  </table>
</div>

<div id="onsite" class="content">
  <h1>On Site</h1>
  <table>
    <thead><tr><th>Release</th><th>Carrier</th></tr></thead>
    <tbody id="onsiteBody"></tbody>
  </table>
</div>

<div id="history" class="content">
  <h1>History <input type="date" id="historyDate" class="tab-date"></h1>
  <table>
    <thead><tr><th>Release</th><th>Completed</th></tr></thead>
    <tbody id="historyBody"></tbody>
  </table>
</div>

<script>
/* ===============================
   SINGLE SOURCE OF TIME — LOCAL
================================ */
const now = new Date();

const localDateParts = {
  year: now.getFullYear(),
  month: now.getMonth(),
  day: now.getDate()
};

// FOR <input type="date">
const localDateKey =
  localDateParts.year + '-' +
  String(localDateParts.month + 1).padStart(2,'0') + '-' +
  String(localDateParts.day).padStart(2,'0');

// FOR BANNER
const localDateLabel = now.toLocaleDateString('en-US', {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

// APPLY EVERYWHERE
document.getElementById('dateLabel').textContent = `Today: ${localDateLabel}`;

const bookingsDateInput = document.getElementById('bookingsDate');
const historyDateInput  = document.getElementById('historyDate');

bookingsDateInput.value = localDateKey;
historyDateInput.value  = localDateKey;

let bookingsDate = localDateKey;
let historyDate  = localDateKey;

/* ===============================
   TAB SYSTEM
================================ */
document.querySelectorAll('.tab').forEach(tab=>{
  tab.onclick=()=>{
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(tab.dataset.tab).classList.add('active');
  };
});

/* ===============================
   DATE CHANGES
================================ */
bookingsDateInput.onchange=e=>{
  bookingsDate=e.target.value;
  renderBookings();
};
historyDateInput.onchange=e=>{
  historyDate=e.target.value;
  renderHistory();
};

/* ===============================
   DATA
================================ */
let bookings=[
  {date:localDateKey,release:'ABC123',carrier:'MAERSK'}
];
let history=[];

/* ===============================
   RENDERS
================================ */
function renderBookings(){
  bookingsBody.innerHTML='';
  bookings.filter(b=>b.date===bookingsDate)
    .forEach(b=>{
      bookingsBody.innerHTML+=`<tr><td>${b.release}</td><td>${b.carrier}</td></tr>`;
    });
}
function renderHistory(){
  historyBody.innerHTML='';
  history.filter(h=>h.date===historyDate)
    .forEach(h=>{
      historyBody.innerHTML+=`<tr><td>${h.release}</td><td>${h.time}</td></tr>`;
    });
}

renderBookings();
</script>

</body>
</html>
